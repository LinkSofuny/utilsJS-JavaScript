/**
 * PromiseA+ v0.01
 *  + then & catch
 *  + all & resolve & reject
 */
!function(){"use strict";function a(b){var d,c=this;if(!(c instanceof a))throw new TypeError("undefined is not a promise!");if("function"!=typeof b)throw new TypeError("Promise resolver "+b+" is not a function!");c.PromiseResult=void 0,c.PromiseState="pending",c.onFulfilledCallbacks=[],c.onRejectedCallbacks=[],d=function(a,b){if("pending"===c.state){c.result=b,c.state=a;var g,d="fulfilled"===a?c.onFulfilledCallbacks:c.onRejectedCallbacks,e=0,f=d.length;f>0&&setTimeout(function(){for(;f>e;e++)g=d[e],"function"==typeof g&&g(c.result)},0)}};try{b(function(a){d("fulfilled",a)},function(a){d("rejected",a)})}catch(e){d("rejected",e)}}function b(a){return null==a?!1:/^(object|function)$/i.test(typeof a)&&"function"==typeof a.then?!0:!1}function c(a,c,d,e){if(a===c)throw new TypeError("Chaining cycle detected for promise");if(b(c))try{c.then(d,e)}catch(f){e(f)}else d(c)}a.prototype={constructor:a,self:!0,then:function(b,d){var f,g,e=this;return"function"!=typeof b&&(b=function(a){return a}),"function"!=typeof d&&(d=function(a){throw a}),g=new a(function(a,h){switch(e.state){case"fulfilled":setTimeout(function(){try{f=b(e.result),c(g,f,a,h)}catch(d){h(d)}},0);break;case"rejected":setTimeout(function(){try{f=d(e.result),c(g,f,a,h)}catch(b){h(b)}},0);break;default:e.onFulfilledCallbacks.push(function(d){try{f=b(d),c(g,f,a,h)}catch(e){h(e)}}),e.onRejectedCallbacks.push(function(b){try{f=d(b),c(g,f,a,h)}catch(e){h(e)}})}})},"catch":function(a){var b=this;return b.then(null,a)},"finally":function(){}},"undefined"!=typeof Symbol&&(a.prototype[Symbol.toStringTag]="Promise"),a.resolve=function(b){return new a(function(a){a(b)})},a.reject=function e(b){return new a(function(){e(b)})},a.all=function(c){var e,d=[],f=0;if(!Array.isArray(c))throw new TypeError(c+"is not iterable");return c=c.map(function(c){return b(c)?c:new a.resolve(c)}),e=new a(function(a,b){c.forEach(function(e,g){e.then(function(b){d[g]=b,f++,f>=c.length&&a(d)}).catch(function(a){b(a)})})})},"object"==typeof window&&(window.Promise=a),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=a)}();